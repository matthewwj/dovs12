let test_codegen program output_filename=
  try
    let typedStmt, _ = Semant.typecheck_prog program in
    let llvm_prog = Codegen.codegen_prog typedStmt in
    let llvm_ir_string = Ll.string_of_prog llvm_prog in
    Codegen.write_to_file output_filename llvm_ir_string;
    print_endline "Program typechecked successfully."
  with
  | Invalid_argument msg -> print_endline ("Typecheck failed: " ^ msg)
  | Unimplemented -> print_endline "Unimplemented feature encountered."
  | _ -> print_endline "Unknown error encountered (probably unimplemented)."
